{"version":3,"sources":["../webpack/bootstrap","../node_modules/react/jsx-runtime.js","../node_modules/object-assign/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/index.js","../node_modules/react/cjs/react.production.min.js","data sync /^/.//season_.*/.json$","data sync /^/.//season_.*//items//passive_items/.json$","data sync /^/.//season_.*//items//energy_items/.json$","data sync /^/.//season_.*//mobs//summon_templates/.json$","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../src/comlink.ts","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","global.js","utils.js","data.js","items.js","character.js","dungeonUtils.js","battle.js","simulator.js","worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","undefined","TypeError","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","arguments","length","f","g","Fragment","for","h","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","ref","__self","__source","q","a","k","b","e","defaultProps","$$typeof","type","props","_owner","current","jsx","jsxs","StrictMode","Profiler","Suspense","u","v","w","x","iterator","z","encodeURIComponent","A","isMounted","enqueueForceUpdate","enqueueReplaceState","enqueueSetState","B","C","this","context","refs","updater","D","E","isReactComponent","setState","Error","forceUpdate","F","constructor","isPureReactComponent","G","H","I","J","children","Array","L","M","N","replace","escape","toString","O","isArray","K","push","y","next","done","P","Q","_status","_result","then","default","R","S","T","ReactCurrentDispatcher","ReactCurrentBatchConfig","transition","IsSomeRendererActing","Children","apply","count","toArray","only","Component","PureComponent","cloneElement","createContext","_calculateChangedBits","_currentValue","_currentValue2","_threadCount","Provider","Consumer","_context","createElement","createFactory","createRef","forwardRef","render","isValidElement","lazy","_payload","_init","memo","compare","useCallback","useContext","useDebugValue","useEffect","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useState","version","webpackContext","req","id","webpackContextResolve","code","resolve","_arrayLikeToArray","arr","len","arr2","_unsupportedIterableToArray","minLen","slice","test","_createForOfIteratorHelper","allowArrayLike","it","_e","normalCompletion","didErr","step","_e2","_slicedToArray","_arr","_n","_d","_s","_i","_defineProperty","obj","configurable","writable","_setPrototypeOf","setPrototypeOf","__proto__","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","Parent","args","Class","instance","Function","_toConsumableArray","iter","proxyMarker","createEndpoint","releaseProxy","throwMarker","isObject","transferHandlers","Map","canHandle","serialize","MessageChannel","port1","port2","expose","deserialize","port","start","createProxy","isError","message","stack","serialized","ep","self","addEventListener","callback","ev","data","returnValue","path","argumentList","fromWireValue","parent","reduce","prop","rawValue","transfer","Promise","catch","toWireValue","wireValue","transferables","postMessage","removeEventListener","closeEndPoint","endpoint","isMessagePort","close","throwIfProxyReleased","isReleased","isProxyReleased","proxy","_target","requestResponseMessage","set","_thisArg","rawArgumentList","last","processArguments","processed","concat","transferCache","WeakMap","transfers","handler","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","_classCallCheck","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","global","verbose","output","season","format","match","number","index","parseInt","log","logWithClassName","className","shouldOutput","toLog","console","currLength","withProbability","pickRandom","iterable","weightKey","selected","total","weight","currentValue","pickRandomWithinRange","lower","upper","deepCopyJson","JSON","parse","stringify","ITEMS_BY_SEASON","TEMPLATES_BY_SEASON","getItems","passive","energy","ABILITY_FOR_ITEM","params","phase","enemyTeam","tier","item","utils","takeDamage","character","amount","battle","changeSpeed","_throwInvalidPhaseError","changeAttack","changeHpMax","changeHp","usedCannon","damageFinal","round","damageBase","allyTeam","summoned","allyTeamIndex","summonedChicken","addSummonToTeam","pickTargetUsingItems","activeTeamIndex","ally","damageAmount","hp","Infinity","targetIsMaxHp","allyIsMaxHp","hpMax","currentTarget","changeEnergy","attackIncrease","damage","max","teams","getTeamOf","poison","poisonAmount","punched","enemy","missingHpProportion","addedEnergy","useItemAbility","originalEnergy","cost","_checkEnergy","_extractParam","param","defaultValue","Character","speed","attackLow","attackHigh","items","angelAvailable","canBeSaved","_preprocessTriggers","processedInitCharacter","allItems","triggers","triggerType","originalHpMax","originalHp","min","originalSpeed","originalAttackLow","originalAttackHigh","amountToGain","phaseParams","triggerPhase","activeCharacter","ret","_mutateTemplate","template","scale","base","scaling","getScaledTemplate","Battle","team1","team2","initTeams","teamIndex","allCharacters","team","addCopyOfCharacterToTeam","originalName","copyNum","toAdd","addCharacterToTeam","summon","dungeonUtils","pos","position","_findPositionWithinTeam","splice","kill","teamHasLost","anyTeamHasLost","activeName","defendingTeam","changeAllEnergy","checkAllHp","blockParams","preDamageParams","runDungeon","waves","currTeam","wave","tick","Comlink","numRuns","winsForTeam0","Simulator"],"mappings":"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","file":"static/js/worker.b7a9be78.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/bdsm/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 70);\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';require(\"object-assign\");var f=require(\"react\"),g=60103;exports.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");exports.Fragment=h(\"react.fragment\")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n","var map = {\n\t\"./season_2/items/energy_items.json\": 2,\n\t\"./season_2/items/passive_items.json\": 3,\n\t\"./season_2/mobs/dungeon_0.json\": 18,\n\t\"./season_2/mobs/dungeon_1.json\": 19,\n\t\"./season_2/mobs/dungeon_10.json\": 20,\n\t\"./season_2/mobs/dungeon_2.json\": 21,\n\t\"./season_2/mobs/dungeon_3.json\": 22,\n\t\"./season_2/mobs/dungeon_4.json\": 23,\n\t\"./season_2/mobs/dungeon_5.json\": 24,\n\t\"./season_2/mobs/dungeon_6.json\": 25,\n\t\"./season_2/mobs/dungeon_7.json\": 26,\n\t\"./season_2/mobs/dungeon_8.json\": 27,\n\t\"./season_2/mobs/dungeon_9.json\": 28,\n\t\"./season_2/mobs/summon_templates.json\": 4,\n\t\"./season_3/items/energy_items.json\": 5,\n\t\"./season_3/items/passive_items.json\": 6,\n\t\"./season_3/mobs/dungeon_0.json\": 29,\n\t\"./season_3/mobs/dungeon_1.json\": 30,\n\t\"./season_3/mobs/dungeon_10.json\": 31,\n\t\"./season_3/mobs/dungeon_11.json\": 32,\n\t\"./season_3/mobs/dungeon_2.json\": 33,\n\t\"./season_3/mobs/dungeon_3.json\": 34,\n\t\"./season_3/mobs/dungeon_4.json\": 35,\n\t\"./season_3/mobs/dungeon_5.json\": 36,\n\t\"./season_3/mobs/dungeon_6.json\": 37,\n\t\"./season_3/mobs/dungeon_7.json\": 38,\n\t\"./season_3/mobs/dungeon_8.json\": 39,\n\t\"./season_3/mobs/dungeon_9.json\": 40,\n\t\"./season_3/mobs/summon_templates.json\": 7,\n\t\"./season_4/items/energy_items.json\": 8,\n\t\"./season_4/items/passive_items.json\": 9,\n\t\"./season_4/mobs/dungeon_0.json\": 41,\n\t\"./season_4/mobs/dungeon_1.json\": 42,\n\t\"./season_4/mobs/dungeon_10.json\": 43,\n\t\"./season_4/mobs/dungeon_11.json\": 44,\n\t\"./season_4/mobs/dungeon_2.json\": 45,\n\t\"./season_4/mobs/dungeon_3.json\": 46,\n\t\"./season_4/mobs/dungeon_4.json\": 47,\n\t\"./season_4/mobs/dungeon_5.json\": 48,\n\t\"./season_4/mobs/dungeon_6.json\": 49,\n\t\"./season_4/mobs/dungeon_7.json\": 50,\n\t\"./season_4/mobs/dungeon_8.json\": 51,\n\t\"./season_4/mobs/dungeon_9.json\": 52,\n\t\"./season_4/mobs/summon_templates.json\": 10,\n\t\"./season_5/items/energy_items.json\": 11,\n\t\"./season_5/items/passive_items.json\": 12,\n\t\"./season_5/mobs/dungeon_0.json\": 53,\n\t\"./season_5/mobs/dungeon_1.json\": 54,\n\t\"./season_5/mobs/dungeon_10.json\": 55,\n\t\"./season_5/mobs/dungeon_11.json\": 56,\n\t\"./season_5/mobs/dungeon_12.json\": 57,\n\t\"./season_5/mobs/dungeon_2.json\": 58,\n\t\"./season_5/mobs/dungeon_3.json\": 59,\n\t\"./season_5/mobs/dungeon_4.json\": 60,\n\t\"./season_5/mobs/dungeon_5.json\": 61,\n\t\"./season_5/mobs/dungeon_6.json\": 62,\n\t\"./season_5/mobs/dungeon_7.json\": 63,\n\t\"./season_5/mobs/dungeon_8.json\": 64,\n\t\"./season_5/mobs/dungeon_9.json\": 65,\n\t\"./season_5/mobs/summon_templates.json\": 13\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 17;","var map = {\n\t\"./season_2/items/passive_items.json\": 3,\n\t\"./season_3/items/passive_items.json\": 6,\n\t\"./season_4/items/passive_items.json\": 9,\n\t\"./season_5/items/passive_items.json\": 12\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 67;","var map = {\n\t\"./season_2/items/energy_items.json\": 2,\n\t\"./season_3/items/energy_items.json\": 5,\n\t\"./season_4/items/energy_items.json\": 8,\n\t\"./season_5/items/energy_items.json\": 11\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 68;","var map = {\n\t\"./season_2/mobs/summon_templates.json\": 4,\n\t\"./season_3/mobs/summon_templates.json\": 7,\n\t\"./season_4/mobs/summon_templates.json\": 10,\n\t\"./season_5/mobs/summon_templates.json\": 13\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 69;","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n        }\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  return createProxy<T>(ep, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: MessageType.RELEASE,\n            path: path.map((p) => p.toString()),\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didn’t happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = self,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export const global = {\r\n  verbose: false,\r\n  output: null,\r\n  season: 5\r\n}\r\n","import { global } from './global.js'\r\n\r\nexport function format() {\r\n  const args = arguments;\r\n  return args[0].replace(/{(\\d+)}/g, function(match, number) {\r\n      const index = parseInt(number) + 1;\r\n      return typeof[args[index]] !== 'undefined'\r\n        ? args[index]\r\n        : match;\r\n  });\r\n}\r\n\r\nexport function log() {\r\n  logWithClassName(arguments, null);\r\n}\r\n\r\nexport function logWithClassName(args, className) {\r\n  if (!global.verbose && global.output === null) {\r\n    return;\r\n  }\r\n  const shouldOutput = typeof args[0] === 'string';\r\n  const toLog = shouldOutput\r\n      ? format(...args)\r\n      : args[0];\r\n  if (global.verbose) {\r\n    console.log(toLog);\r\n  }\r\n  if (shouldOutput && global.output !== null) {\r\n    const currLength = global.output.length;\r\n    global.output.push(className === null ?\r\n                       <div key={currLength}>{toLog}</div> :\r\n                       <div key={currLength} className={className}>{toLog}</div>);\r\n  }\r\n}\r\n\r\nexport function extend(iterable1, iterable2) {\r\n  for (const index in iterable2) {\r\n    iterable1.push(iterable2[index]);\r\n  }\r\n}\r\n\r\nexport function all(iterable, condition) {\r\n  return iterable.reduce((accumulator, currentValue) => {\r\n    return accumulator && condition(currentValue);\r\n  }, true);\r\n}\r\n\r\nexport function withProbability(p) {\r\n  return Math.random() < p;\r\n}\r\n\r\nexport function sum(iterable, key=null) {\r\n  var total = 0;\r\n  for (const i in iterable) {\r\n    const currentValue = iterable[i];\r\n    if (typeof key === 'function') {\r\n      total += key(currentValue);\r\n      continue;\r\n    }\r\n    if (key === null) {\r\n      if (typeof currentValue === 'number') {\r\n        total += currentValue;\r\n        continue;\r\n      }\r\n      total++;\r\n      continue;\r\n    }\r\n    if (key in currentValue) {\r\n      total += currentValue[key];\r\n      continue;\r\n    }\r\n  }\r\n  return total;\r\n}\r\n\r\nexport function pickRandom(iterable, weightKey=null) {\r\n  var selected = null;\r\n  var total = 0;\r\n  for (const i in iterable) {\r\n    const currentValue = iterable[i];\r\n    var weight;\r\n    if (typeof weightKey === 'function') {\r\n      weight = weightKey(currentValue);\r\n    } else if (weightKey === null) {\r\n      weight = typeof currentValue === 'number' ? currentValue : 1;\r\n    } else if (weightKey in currentValue) {\r\n      weight = currentValue[weightKey];\r\n    }\r\n    total += weight\r\n    if(withProbability(weight / total)) {\r\n      selected = currentValue;\r\n    }\r\n  }\r\n  return selected;\r\n}\r\n\r\nexport function pickRandomWithinRange(lower, upper) {\r\n  return lower + Math.floor(Math.random() * (upper - lower + 1));\r\n}\r\n\r\nexport function evalThreeFunctions(expr) {\r\n  if (expr.match(/^-?\\d+$/) !== null) {\r\n    return parseInt(expr);\r\n  }\r\n\r\n  const splitPlus = expr.split('+');\r\n  if (splitPlus.length > 1) {\r\n    var total = 0;\r\n    for (const val of splitPlus) {\r\n      total += evalThreeFunctions(val);\r\n    }\r\n    return total;\r\n  }\r\n\r\n  const splitMinus = expr.split('-');\r\n  if (splitMinus.length > 1) {\r\n    var negTotal = null;\r\n    for (const val of splitMinus) {\r\n      if (negTotal === null) {\r\n        negTotal = val === '' ? 0 : evalThreeFunctions(val);\r\n        continue;\r\n      }\r\n      negTotal -= evalThreeFunctions(val);\r\n    }\r\n    return negTotal;\r\n  }\r\n\r\n  var product = 1;\r\n  const splitMult = expr.split('*');\r\n  for (const val of splitMult) {\r\n    product *= parseInt(val);\r\n  }\r\n  return product;\r\n}\r\n\r\nexport function deepCopyJson(obj) {\r\n  return JSON.parse(JSON.stringify(obj));\r\n}\r\n","import { global } from './global.js';\r\nimport * as utils from './utils.js';\r\n\r\nconst MOBS_BY_SEASON = {};\r\nconst ITEMS_BY_SEASON = {};\r\nconst ITEM_NAMES_BY_SEASON = {};\r\nconst TEMPLATES_BY_SEASON = {};\r\n\r\nexport function getDungeon(season, dungeon) {\r\n  if (!(season in MOBS_BY_SEASON)) {\r\n    MOBS_BY_SEASON[season] = {};\r\n  }\r\n  const dungeonsForSeason = MOBS_BY_SEASON[season];\r\n\r\n  if (!(dungeon in dungeonsForSeason)) {\r\n    const waves = require(\r\n        './data/season_' + season + '/mobs/dungeon_' + dungeon + '.json');\r\n    for (const i in waves) {\r\n      const wave = waves[i];\r\n      for (const j in wave) {\r\n        const character = wave[j];\r\n        if ('_stats' in character) {\r\n          delete character['_stats'];\r\n        }\r\n      }\r\n    }\r\n    dungeonsForSeason[dungeon] = waves;\r\n  }\r\n\r\n  return dungeonsForSeason[dungeon];\r\n}\r\n\r\nexport function getDungeonList() {\r\n  const dungeonsBySeason = require('./data/dungeons.json');\r\n  const dungeonList = [];\r\n\r\n  const keys = Object.keys(dungeonsBySeason);\r\n  keys.sort().reverse();\r\n  for (const season of keys) {\r\n    for (const dungeon of dungeonsBySeason[season]) {\r\n      dungeonList.push(JSON.stringify([parseInt(season), dungeon]));\r\n    }\r\n  }\r\n  return dungeonList;\r\n}\r\n\r\nexport function getItems() {\r\n  if (!(global.season in ITEMS_BY_SEASON)) {\r\n    ITEMS_BY_SEASON[global.season] = {\r\n      passive: require(\r\n          './data/season_' + global.season + '/items/passive_items.json'),\r\n      energy: require(\r\n          './data/season_' + global.season + '/items/energy_items.json')\r\n    };\r\n  }\r\n  return ITEMS_BY_SEASON[global.season];\r\n}\r\n\r\nexport function getAllItemNamesAndBlank() {\r\n  if (!(global.season in ITEM_NAMES_BY_SEASON)) {\r\n    const items = getItems();\r\n    const obtainableItems = [];\r\n    const fusionItems = [];\r\n    const unobtainableItems = [];\r\n    for (const type of ['energy', 'passive']) {\r\n      for (const item in items[type]) {\r\n        if (items[type][item].fusion) {\r\n          fusionItems.push(item);\r\n          continue;\r\n        }\r\n        if (items[type][item].obtainable) {\r\n          obtainableItems.push(item);\r\n          continue;\r\n        }\r\n        unobtainableItems.push(item);\r\n      }\r\n    }\r\n    obtainableItems.sort();\r\n    fusionItems.sort();\r\n    unobtainableItems.sort();\r\n\r\n    const itemNames = [''];\r\n    utils.extend(itemNames, obtainableItems);\r\n    itemNames.push('');\r\n    utils.extend(itemNames, fusionItems);\r\n    itemNames.push('');\r\n    utils.extend(itemNames, unobtainableItems);\r\n    ITEM_NAMES_BY_SEASON[global.season] = itemNames;\r\n  }\r\n  return ITEM_NAMES_BY_SEASON[global.season];\r\n}\r\n\r\nexport function getTemplates() {\r\n  if (!(global.season in TEMPLATES_BY_SEASON)) {\r\n    TEMPLATES_BY_SEASON[global.season] = require(\r\n        './data/season_' + global.season + '/mobs/summon_templates.json');\r\n  }\r\n  return TEMPLATES_BY_SEASON[global.season];\r\n}\r\n","import * as data from './data.js';\r\nimport * as utils from './utils.js';\r\n\r\nconst ABILITY_FOR_ITEM = {\r\n  'Avalanche': avalanche,\r\n  'BF Cannon': bfCannon,\r\n  'Big Club': bigClub,\r\n  'Boosting Bugle': boostingBugle,\r\n  'Chumby Chicken': chumbyChicken,\r\n  'Challenger Arrow': challengerArrow,\r\n  'Chicken Dinner': chickenDinner,\r\n  'Cleansed Tome': cleansedTome,\r\n  'Cleansing Flames': cleansingFlames,\r\n  'Draining Dagger': drainingDagger,\r\n  'Draining Machete': drainingMachete,\r\n  'Energetic Ally': energeticAlly,\r\n  'Explosion Powder': explosionPowder,\r\n  'Festive Feast': festiveFeast,\r\n  'Fire-Forged Friendship': fireForgedFriendship,\r\n  'Fire Sword': fireSword,\r\n  'Freezeman': freezeman,\r\n  'Halberd': halberd,\r\n  'Healing Pendant': healingPendant,\r\n  'Imp Horn': impHorn,\r\n  'Imp Whistle': impWhistle,\r\n  'Knight\\'s Lance': knightsLance,\r\n  'Last Resort': lastResort,\r\n  'Love Letter': loveLetter,\r\n  'Machete': machete,\r\n  'Magic Parasol': magicParasol,\r\n  'Martyr Armor': martyrArmor,\r\n  'Pet Imp': petImp,\r\n  'Poison Dagger': poisonDagger,\r\n  'Poison Tipped Machete': poisonTippedMachete,\r\n  'Punching Bag': punchingBag,\r\n  'Quickening Death': quickeningDeath,\r\n  'Quickening Death: Focused': quickeningDeathFocused,\r\n  'Rock Companion': rockCompanion,\r\n  'Rough Skin': roughSkin,\r\n  'Rousing Death': rousingDeath,\r\n  'Seeking Explosions': seekingExplosions,\r\n  'Seeking Missiles': seekingMissiles,\r\n  'Survival Kit': survivalKit,\r\n  'Thorns': thorns,\r\n  'Trusty Steed': trustySteed,\r\n  'Whirlwind Axe': whirlwindAxe\r\n}\r\n\r\nexport function useItemAbility(params) {\r\n  if (params.item.name in data.getItems().energy && !_checkEnergy(params)) {\r\n    return;\r\n  }\r\n  return ABILITY_FOR_ITEM[params.item.name](params);\r\n}\r\n\r\nfunction _checkEnergy(params) {\r\n  const originalEnergy = params.character.energy;\r\n  const cost = data.getItems().energy[params.item.name].cost;\r\n  if (originalEnergy < cost) {\r\n    return false;\r\n  }\r\n  utils.log('Activating {0}', params.item.name);\r\n  params.character.changeEnergy({amount: -cost});\r\n  return true;\r\n}\r\n\r\nfunction _throwInvalidPhaseError(params) {\r\n  throw Error(utils.format('InternalError: Item {0} does not have phase {1}',\r\n                           params.item.name, params.phase));\r\n}\r\n\r\nfunction avalanche(params) {\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      const enemyTeam = params.enemyTeam;\r\n      const tier = params.item.tier;\r\n      for (var i = 0; i < 2; i++) {\r\n        const target = utils.pickRandom(enemyTeam);\r\n        target.takeDamage({\r\n          source: params.character,\r\n          amount: utils.pickRandomWithinRange(3 * tier, 5 * tier),\r\n          battle: params.battle\r\n        });\r\n        target.changeSpeed({\r\n          amount: -utils.pickRandomWithinRange(0, tier)\r\n        });\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction bfCannon(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeAttack({amount: 6 + 6 * tier});\r\n      params.character.changeHpMax({amount: 7 * tier});\r\n      params.character.changeHp({amount: 7 * tier});\r\n      break;\r\n    }\r\n    case 'SkipTurn': {\r\n      if (params.character.usedCannon) {\r\n        utils.log('Activating {0}: Skipping Turn', params.item.name);\r\n        params.character.usedCannon = false;\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    case 'PostDamage': {\r\n      params.character.usedCannon = true;\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction bigClub(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PreDamage': {\r\n      if (!utils.withProbability(0.11 * tier)) {\r\n        break;\r\n      }\r\n      utils.log('Activated {0}', params.item.name);\r\n      params.damageFinal += Math.round(1.5 * params.damageBase);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction boostingBugle(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      const allyTeam = params.allyTeam;\r\n      if (allyTeam.length === 1) {\r\n        break;\r\n      }\r\n      for (var i = 0; i < 2; i++) {\r\n        const target = utils.pickRandom(\r\n            allyTeam,\r\n            (c) => {\r\n              if (c.summoned) {\r\n                return 0;\r\n              }\r\n              if (c.character === params.character.character) {\r\n                return 0;\r\n              }\r\n              return 1;\r\n            }\r\n        );\r\n        if (target === null) {\r\n          break;\r\n        }\r\n        target.changeHp({amount: tier + tier});\r\n        target.changeAttack({amount: tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction chumbyChicken(params) {\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      const allyTeamIndex = params.allyTeamIndex;\r\n      if (params.character.character in params.battle.summonedChicken) {\r\n        break;\r\n      }\r\n      params.battle.summonedChicken[params.character.character] = 0;\r\n      params.battle.addSummonToTeam(params.item, allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction challengerArrow(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      const target = params.character.pickTargetUsingItems(params.enemyTeam);\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: 10 * tier,\r\n          battle: params.battle\r\n      });\r\n      params.character.changeAttack({amount: 2*tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction chickenDinner(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Death': {\r\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\r\n        break;\r\n      }\r\n      for (const ally of params.allyTeam) {\r\n        if (ally.character === params.character.character) {\r\n          continue;\r\n        }\r\n        ally.changeHp({amount: 1 + 2 * tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction cleansedTome(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      const amount = 5 * tier;\r\n      params.character.changeHpMax({amount: amount});\r\n      params.character.changeHp({amount: amount});\r\n      break;\r\n    }\r\n    case 'PostTarget': {\r\n      const damageAmount = tier;\r\n      if (damageAmount >= params.character.hp) {\r\n        utils.log('Not activating {0}: not enough HP', params.item.name);\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      const allyTeam = params.allyTeam;\r\n      var target = {hp: Infinity};\r\n      var targetIsMaxHp = true;\r\n      for (const ally of allyTeam) {\r\n        if (ally.summoned) {\r\n          continue;\r\n        }\r\n        const allyIsMaxHp = ally.hp === ally.hpMax;\r\n        if (allyIsMaxHp && !targetIsMaxHp) {\r\n          continue;\r\n        }\r\n        if (ally.hp >= target.hp) {\r\n          continue;\r\n        }\r\n        target = ally;\r\n        targetIsMaxHp = allyIsMaxHp;\r\n      }\r\n      if (target.hp === Infinity) {\r\n        break;\r\n      }\r\n      params.character.changeHp({amount: -damageAmount});\r\n      target.changeHp({amount: 3 * tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction cleansingFlames(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostDamage': {\r\n      const allyTeam = params.allyTeam;\r\n      if (!utils.withProbability(0.5)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      for (const ally of allyTeam) {\r\n        ally.changeHp({amount: tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction drainingDagger(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.currentTarget.changeAttack({amount: -tier});\r\n      if (utils.withProbability(0.2)) {\r\n        params.currentTarget.changeEnergy({amount: -tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction drainingMachete(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.currentTarget.changeAttack({amount: -(7 + tier)});\r\n\r\n      const enemyTeam = params.enemyTeam;\r\n      if (enemyTeam.length === 1) {\r\n        break;\r\n      }\r\n      const target = utils.pickRandom(\r\n          enemyTeam,\r\n          (c) => {\r\n            if (c.character === params.currentTarget.character) {\r\n              return 0;\r\n            }\r\n            return 1;\r\n          }\r\n      );\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: utils.pickRandomWithinRange(3 * tier + 22, 4 * tier + 31),\r\n          battle: params.battle\r\n      });\r\n      target.changeAttack({amount: -(7 + tier)});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction energeticAlly(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      const allyTeam = params.allyTeam;\r\n      var target = {hp: Infinity};\r\n      var targetIsMaxHp = true;\r\n      for (const ally of allyTeam) {\r\n        if (ally.summoned) {\r\n          continue;\r\n        }\r\n        const allyIsMaxHp = ally.hp === ally.hpMax;\r\n        if (allyIsMaxHp && !targetIsMaxHp) {\r\n          continue;\r\n        }\r\n        if (ally.hp >= target.hp) {\r\n          continue;\r\n        }\r\n        target = ally;\r\n        targetIsMaxHp = allyIsMaxHp;\r\n      }\r\n      if (target.hp === Infinity) {\r\n        break;\r\n      }\r\n      target.changeHp({amount: 5 * tier});\r\n      target.changeEnergy({amount: 20});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction explosionPowder(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      const enemyTeam = params.enemyTeam;\r\n      if (enemyTeam.length === 1) {\r\n        const target = enemyTeam[Object.keys(enemyTeam)[0]];\r\n        target.takeDamage({\r\n            source: params.character,\r\n            amount: utils.pickRandomWithinRange(10 * tier, 20 * tier),\r\n            battle: params.battle\r\n        });\r\n        break;\r\n      }\r\n      for (const enemy of enemyTeam) {\r\n        enemy.takeDamage({\r\n            source: params.character,\r\n            amount: utils.pickRandomWithinRange(5 * tier, 10 * tier),\r\n            battle: params.battle\r\n        });\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction festiveFeast(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      for (const enemy of params.enemyTeam) {\r\n        enemy.takeDamage({\r\n            source: params.character,\r\n            amount: 3 * tier,\r\n            battle: params.battle\r\n        });\r\n      }\r\n      for (const ally of params.allyTeam) {\r\n        ally.changeHp({amount: 3 * tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction fireForgedFriendship(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostDamage': {\r\n      if (!utils.withProbability(0.33)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      for (const ally of params.allyTeam) {\r\n        ally.changeHp({amount: 9 + tier});\r\n        ally.changeAttack({amount: 3 + tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction fireSword(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostDamage': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      var attackIncrease = 0;\r\n      for (var i = 0; i < tier; i++) {\r\n        if (!utils.withProbability(0.3)) {\r\n          continue;\r\n        }\r\n        attackIncrease++;\r\n      }\r\n      params.character.changeAttack({amount: attackIncrease});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction freezeman(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeSpeed({amount: tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction halberd(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeAttack({amount: tier + tier});\r\n      params.character.changeHpMax({amount: 4 * tier});\r\n      params.character.changeHp({amount: 4 * tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction healingPendant(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      if (!utils.withProbability(0.5)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeHp({amount: 5 * tier});\r\n      break;\r\n    }\r\n    case 'Block': {\r\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.character === params.character.character) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.hp < params.character.hp) {\r\n        utils.log(\r\n            '{0} blocks for {1}',\r\n            params.character.character,\r\n            params.currentTarget.character\r\n        );\r\n        params.currentTarget = params.character;\r\n        break;\r\n      }\r\n      utils.log(\r\n          '{0} is a coward',\r\n          params.character.character,\r\n      );\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction impHorn(params) {\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\n\r\nfunction impWhistle(params) {\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction knightsLance(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      const enemyTeam = params.enemyTeam;\r\n      const target = utils.pickRandom(enemyTeam);\r\n      if (params.character.hp === params.character.hpMax) {\r\n        target.takeDamage({\r\n            source: params.character,\r\n            amount: utils.pickRandomWithinRange(10 * tier, 14 * tier),\r\n            battle: params.battle\r\n        });\r\n        break;\r\n      }\r\n      const amount = utils.pickRandomWithinRange(5 * tier, 7 * tier);\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: amount,\r\n          battle: params.battle\r\n      });\r\n      params.character.changeHp({amount: amount});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction lastResort(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Death': {\r\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\r\n        break;\r\n      }\r\n      if (params.source === null) {\r\n        break;\r\n      }\r\n      params.source.takeDamage({\r\n        amount: 10 * tier,\r\n        battle: params.battle,\r\n        source: params.character\r\n      });\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction loveLetter(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostDamage': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      const allyTeam = params.allyTeam;\r\n      const target = utils.pickRandom(\r\n          allyTeam,\r\n          (c) => {\r\n            if (c.character === params.character.character) {\r\n              return 0;\r\n            }\r\n            if (c.summoned) {\r\n              return 0;\r\n            }\r\n            return 1;\r\n          }\r\n      );\r\n      if (target === null) {\r\n        break;\r\n      }\r\n      target.changeHp({amount: tier + tier});\r\n      target.changeEnergy({amount: tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction machete(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      const enemyTeam = params.enemyTeam;\r\n      if (enemyTeam.length === 1) {\r\n        break;\r\n      }\r\n      const target = utils.pickRandom(\r\n          enemyTeam,\r\n          (c) => {\r\n            if (c.character === params.currentTarget.character) {\r\n              return 0;\r\n            }\r\n            return 1;\r\n          }\r\n      );\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: utils.pickRandomWithinRange(3 * tier, 4 * tier),\r\n          battle: params.battle\r\n      });\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction magicParasol(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Block': {\r\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.character === params.character.character) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.hp < params.character.hp) {\r\n        utils.log(\r\n            '{0} blocks for {1}',\r\n            params.character.character,\r\n            params.currentTarget.character\r\n        );\r\n        params.currentTarget = params.character;\r\n        break;\r\n      }\r\n      utils.log(\r\n          '{0} is a coward',\r\n          params.character.character,\r\n      );\r\n      break;\r\n    }\r\n    case 'EnemyDamage': {\r\n      if (!utils.withProbability(0.17 + 0.03 * tier)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.damage = Math.max(0, params.damage - 2 - 3 * tier);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction martyrArmor(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'EnemyDamage': {\r\n      if (!utils.withProbability(0.66)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      const target = utils.pickRandom(\r\n          params.battle.teams[\r\n              params.battle.getTeamOf[params.character.character]\r\n          ],\r\n          (c) => {\r\n            if (c.character === params.character.character) {\r\n              return 0;\r\n            }\r\n            if (c.summoned) {\r\n              return 0;\r\n            }\r\n            return 1;\r\n          }\r\n      );\r\n      if (target === null) {\r\n        break;\r\n      }\r\n      target.changeHp({amount: tier + tier});\r\n      target.changeEnergy({amount: tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction petImp(params) {\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      if (params.battle === null) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction poisonTippedMachete(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      const poisonAmount = tier * 3 + 9;\r\n      params.currentTarget.poison += poisonAmount;\r\n      const enemyTeam = params.enemyTeam;\r\n      if (enemyTeam.length === 1) {\r\n        break;\r\n      }\r\n      const target = utils.pickRandom(\r\n          enemyTeam,\r\n          (c) => {\r\n            if (c.character === params.currentTarget.character) {\r\n              return 0;\r\n            }\r\n            return 1;\r\n          }\r\n      );\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: utils.pickRandomWithinRange(24 + 3 * tier, 32 + 4 * tier),\r\n          battle: params.battle\r\n      });\r\n      target.poison += poisonAmount;\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction poisonDagger(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeHpMax({amount: 3 * tier});\r\n      params.character.changeHp({amount: 3 * tier});\r\n      break;\r\n    }\r\n    case 'PostTarget': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.currentTarget.poison += tier;\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction punchingBag(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      const target = params.currentTarget;\r\n      const amount = utils.pickRandomWithinRange(5 * tier, 10 * tier);\r\n      target.takeDamage({\r\n          source: params.character,\r\n          amount: amount,\r\n          battle: params.battle\r\n      });\r\n      if (!utils.withProbability(0.28 + 0.08 * tier)) {\r\n        break;\r\n      }\r\n      utils.log('{0} stunned {1}', params.item.name, target.character);\r\n      target.punched = true;\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction quickeningDeath(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Death': {\r\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\r\n        break;\r\n      }\r\n      for (const ally of params.allyTeam) {\r\n        if (ally.character === params.character.character) {\r\n          continue;\r\n        }\r\n        ally.changeSpeed({amount: tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction quickeningDeathFocused(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Death': {\r\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\r\n        break;\r\n      }\r\n      const target = utils.pickRandom(params.allyTeam, (c) => {\r\n        if (c.character === params.character.character) {\r\n          return 0;\r\n        }\r\n        return 1;\r\n      });\r\n      if (target === null) {\r\n        break;\r\n      }\r\n      target.changeSpeed({amount: 5 * tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction rockCompanion(params) {\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      if (params.battle === null) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction roughSkin(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'EnemyDamage': {\r\n      if (!utils.withProbability(0.5)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.damage = Math.max(0, params.damage - tier - tier);\r\n      params.source.changeHp({amount: -tier - tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction rousingDeath(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Death': {\r\n      if (params.battle.activeTeamIndex === params.allyTeamIndex) {\r\n        break;\r\n      }\r\n      for (const ally of params.allyTeam) {\r\n        if (ally.character === params.character.character) {\r\n          continue;\r\n        }\r\n        ally.changeEnergy({amount: 10 * tier});\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction seekingExplosions(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PostTarget': {\r\n      for (var i = 0; i < 4; i++) {\r\n        var target = {hp: Infinity};\r\n        for (const enemy of params.enemyTeam) {\r\n          if (enemy.hp <= 0) {\r\n            continue;\r\n          }\r\n          if (enemy.hp < target.hp) {\r\n            target = enemy;\r\n          }\r\n        }\r\n        if (target.hp === Infinity) {\r\n          break;\r\n        }\r\n        target.takeDamage({\r\n            source: params.character,\r\n            amount: utils.pickRandomWithinRange(35 + 10 * tier, 70 + 20 * tier),\r\n            battle: params.battle\r\n        });\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction seekingMissiles(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'Target': {\r\n      var target = {hp: Infinity};\r\n      for (const enemy of params.enemyTeam) {\r\n        if (enemy.hp < target.hp) {\r\n          target = enemy;\r\n        }\r\n      }\r\n      if (target.hp === Infinity) {\r\n        throw Error('InternalError: No target in enemy team');\r\n      }\r\n      utils.log('{0} selected target {1}', params.item.name, target.character);\r\n      params.currentTarget = target;\r\n      break;\r\n    }\r\n    case 'PreDamage': {\r\n      const missingHpProportion =\r\n          1 - params.currentTarget.hp / params.currentTarget.hpMax;\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.damageFinal += Math.floor(5 * missingHpProportion * tier);\r\n      break;\r\n    }\r\n    case 'Kill': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.character.changeHp({amount: 6 * tier});\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction survivalKit(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      const amount = 20 * tier;\r\n      params.character.changeHpMax({amount: amount});\r\n      params.character.changeHp({amount: amount});\r\n      break;\r\n    }\r\n    case 'Block': {\r\n      if (!utils.withProbability(0.07 + 0.03 * tier)) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.character === params.character.character) {\r\n        break;\r\n      }\r\n      if (params.currentTarget.hp < params.character.hp) {\r\n        utils.log(\r\n            '{0} blocks for {1}',\r\n            params.character.character,\r\n            params.currentTarget.character\r\n        );\r\n        params.currentTarget = params.character;\r\n        break;\r\n      }\r\n      utils.log(\r\n          '{0} is a coward',\r\n          params.character.character,\r\n      );\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction thorns(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'TurnStart': {\r\n      utils.log('Activating {0}', params.item.name);\r\n      var addedEnergy = false;\r\n      for (const enemy of params.enemyTeam) {\r\n        enemy.takeDamage({\r\n            source: params.character,\r\n            amount: tier,\r\n            battle: params.battle\r\n        });\r\n        if (addedEnergy) {\r\n          continue;\r\n        }\r\n        if (!utils.withProbability(0.25)) {\r\n          continue;\r\n        }\r\n        params.character.changeEnergy({amount: tier});\r\n        addedEnergy = true;\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction trustySteed(params) {\r\n  switch (params.phase) {\r\n    case 'InitCharacter': {\r\n      if (params.battle === null) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      params.battle.addSummonToTeam(params.item, params.allyTeamIndex);\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n\r\nfunction whirlwindAxe(params) {\r\n  const tier = params.item.tier;\r\n  switch (params.phase) {\r\n    case 'PreDamage': {\r\n      if (!utils.withProbability(0.11 * tier)) {\r\n        break;\r\n      }\r\n      utils.log('Activating {0}', params.item.name);\r\n      for (const enemy of params.enemyTeam) {\r\n        if (enemy.character === params.currentTarget.character) {\r\n          continue;\r\n        }\r\n        enemy.takeDamage({\r\n            source: params.character,\r\n            amount: params.damageBase,\r\n            battle: params.battle\r\n        });\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      _throwInvalidPhaseError(params);\r\n    }\r\n  }\r\n}\r\n","import * as data from './data.js';\r\nimport * as items from './items.js';\r\nimport * as utils from './utils.js';\r\n\r\nexport function getBaseStats(player) {\r\n  const params = {\r\n    username: player.username,\r\n    items: [],\r\n    processedInitCharacter: false\r\n  }\r\n  for (const item of player.items) {\r\n    if (item.name === '') {\r\n      continue;\r\n    }\r\n    params.items.push(item);\r\n  }\r\n  const character = new Character(params);\r\n  character.changeHpMax({amount: player.monuments.Health * 5});\r\n  character.changeAttack({amount: player.monuments.Power});\r\n  character.changeSpeed({amount: player.monuments.Speed});\r\n  character.triggerPhase({\r\n    battle: null,\r\n    phase: 'InitCharacter'\r\n  });\r\n  return character;\r\n}\r\n\r\nfunction _extractParam(params, param, defaultValue) {\r\n  if (param in params) {\r\n    return params[param];\r\n  }\r\n  return defaultValue;\r\n}\r\n\r\nexport class Character {\r\n  constructor(params) {\r\n    this.character = _extractParam(params, 'character', 'Unknown');\r\n    this.hpMax = _extractParam(params, 'hpMax', 100);\r\n    this.hp = _extractParam(params, 'hp', this.hpMax);\r\n    this.speed = _extractParam(params, 'speed', 10);\r\n    this.attackLow = _extractParam(params, 'attackLow', 1);\r\n    this.attackHigh = _extractParam(params, 'attackHigh', 10);\r\n    this.energy = _extractParam(params, 'energy', 0);\r\n    this.summoned = _extractParam(params, 'summoned', false);\r\n    this.items = _extractParam(params, 'items', []);\r\n\r\n    this.angelAvailable = _extractParam(params, 'angelAvailable', false);\r\n    this.canBeSaved = _extractParam(params, 'canBeSaved', true);\r\n    this.poison = _extractParam(params, 'poison', 0);\r\n    this.usedCannon = _extractParam(params, 'usedCannon', false);\r\n    this.punched = _extractParam(params, 'punched', false);\r\n    this._preprocessTriggers();\r\n    this.processedInitCharacter =\r\n        _extractParam(params, 'processedInitCharacter', true);\r\n  }\r\n\r\n  _preprocessTriggers() {\r\n    if ('triggers' in this) {\r\n      return;\r\n    }\r\n    const allItems = data.getItems();\r\n    const triggers = {};\r\n    for (const item of this.items) {\r\n      const triggerTypes = item.name in allItems.energy\r\n          ? allItems.energy[item.name].triggers\r\n          : allItems.passive[item.name].triggers;\r\n      for (const triggerType of triggerTypes) {\r\n        if (!(triggerType in triggers)) {\r\n          triggers[triggerType] = [item];\r\n          continue;\r\n        }\r\n        triggers[triggerType].push(item);\r\n      }\r\n    }\r\n    this.triggers = triggers;\r\n  }\r\n\r\n  deepCopy() {\r\n    const params = utils.deepCopyJson(this);\r\n    return new Character(params);\r\n  }\r\n\r\n  changeHpMax(params) {\r\n    const originalHpMax = this.hpMax;\r\n    this.hpMax += params.amount;\r\n    utils.log('{0} max hp changed by {1}: {2} -> {3}',\r\n              this.character, params.amount, originalHpMax, this.hpMax);\r\n  }\r\n\r\n  changeHp(params) {\r\n    const originalHp = this.hp;\r\n    if (originalHp <= 0 && params.amount > 0) {\r\n      // Dead characters cannot be healed\r\n      return;\r\n    }\r\n    this.hp = Math.min(this.hp + params.amount, this.hpMax);\r\n    utils.log('{0} hp changed by {1}: {2} -> {3}',\r\n              this.character, params.amount, originalHp, this.hp);\r\n  }\r\n\r\n  changeSpeed(params) {\r\n    const originalSpeed = this.speed;\r\n    this.speed = Math.max(this.speed + params.amount, 1);\r\n    utils.log('{0} speed changed by {1}: {2} -> {3}',\r\n              this.character, params.amount, originalSpeed, this.speed);\r\n  }\r\n\r\n  changeAttack(params) {\r\n    const originalAttackLow = this.attackLow;\r\n    const originalAttackHigh = this.attackHigh;\r\n    const amountToGain = Math.max(-originalAttackLow, params.amount);\r\n    this.attackLow += amountToGain;\r\n    this.attackHigh += amountToGain;\r\n    utils.log('{0} attack changed by {1}: {2} -> {3}',\r\n              this.character,\r\n              params.amount,\r\n              [originalAttackLow, originalAttackHigh],\r\n              [this.attackLow, this.attackHigh]);\r\n  }\r\n\r\n  changeEnergy(params) {\r\n    const originalEnergy = this.energy;\r\n    this.energy = Math.max(this.energy + params.amount, 0);\r\n    utils.log('{0} energy changed by {1}: {2} -> {3}',\r\n              this.character,\r\n              params.amount,\r\n              originalEnergy,\r\n              this.energy);\r\n  }\r\n\r\n  takeDamage(params) {\r\n    const phaseParams = {\r\n        battle: params.battle,\r\n        damage: params.amount,\r\n        phase: 'EnemyDamage',\r\n        source: params.source\r\n    };\r\n    this.triggerPhase(phaseParams);\r\n    this.changeHp({\r\n        amount: -phaseParams.damage\r\n    });\r\n    if (this.hp > 0) {\r\n      return;\r\n    }\r\n    const allyTeamIndex = params.battle.getTeamOf[this.character];\r\n    this.triggerPhase({\r\n      allyTeam: params.battle.teams[allyTeamIndex],\r\n      allyTeamIndex: allyTeamIndex,\r\n      battle: params.battle,\r\n      character: this,\r\n      phase: 'Death',\r\n      source: params.source\r\n    });\r\n    if (this.character !== params.battle.activeCharacter.character) {\r\n      params.battle.activeCharacter.triggerPhase({\r\n        phase: 'Kill'\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Returns whether the turns should be skipped. */\r\n  triggerPhase(params) {\r\n    if (params.phase === 'SkipTurn' && this.punched) {\r\n      this.punched = false;\r\n      utils.log(\"{0} was punched. Skipping turn.\", this.character);\r\n      return true;\r\n    }\r\n    if (!(params.phase in this.triggers)) {\r\n      return false;\r\n    }\r\n    if (params.phase === 'InitCharacter' && this.processedInitCharacter) {\r\n      return false;\r\n    }\r\n\r\n    params.character = this;\r\n    var ret = false;\r\n    for (const item of this.triggers[params.phase]) {\r\n      if (items.useItemAbility(Object.assign(params, {\r\n            item: item\r\n        })) === true) {\r\n        ret = true;\r\n      }\r\n    }\r\n    if (params.phase === 'InitCharacter') {\r\n      this.processedInitCharacter = true;\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  pickTargetUsingItems(enemyTeam) {\r\n    const params = {\r\n        currentTarget: utils.pickRandom(enemyTeam),\r\n        enemyTeam: enemyTeam,\r\n        phase: 'Target'\r\n    };\r\n\r\n    this.triggerPhase(params);\r\n    return params.currentTarget;\r\n  }\r\n}\r\n\r\nCharacter.prototype.toString = function() {\r\n  return this.character;\r\n}\r\n","import * as data from './data.js';\r\nimport * as utils from './utils.js';\r\n\r\nfunction formatDescriptionWithTier(description, tier) {\r\n  const re = /\\{([\\dt+\\-*]+)\\}/;\r\n  var current = description;\r\n  var m = current.match(re);\r\n  while (m != null) {\r\n    current = current.replace(\r\n        m[0],\r\n        utils.evalThreeFunctions(m[1].replace('t', tier))\r\n    );\r\n    m = current.match(re);\r\n  }\r\n  return current;\r\n}\r\n\r\nexport function getDescriptionOfItem(item) {\r\n  const items = data.getItems();\r\n  const itemData = item.name in items.passive ?\r\n    items.passive[item.name] :\r\n    items.energy[item.name];\r\n  if (typeof itemData === 'undefined') {\r\n    return '';\r\n  }\r\n  return formatDescriptionWithTier(itemData.description, item.tier);\r\n}\r\n\r\nexport function parseMonuments(input) {\r\n  const monumentLevels = {};\r\n  for (const line of input.split('\\n')) {\r\n    if (line.startsWith('BDSM:Angel:')) {\r\n      monumentLevels.Angel = line[line.length - 1] !== '0';\r\n      continue;\r\n    }\r\n    const matches = line.match(/\\|\\s*(Health|Power|Speed)\\s*\\|\\s*(\\d+)\\s*\\|/);\r\n    if (matches === null) {\r\n      continue;\r\n    }\r\n    monumentLevels[matches[1]] = parseInt(matches[2]);\r\n  }\r\n  return monumentLevels;\r\n}\r\n\r\nexport function parseInventory(input) {\r\n  const player = {username: '', items: []};\r\n  var empty = true;\r\n  for (const line of input.split('\\n')) {\r\n    const matchUsername = line.match(/([^*]*)'s Inventory/);\r\n    const matchItem = line.match(\r\n        /\\d-\\s(_{0,2}<?[\\w\\d:]+>?)?\\s([\\w'\\s]+)\\s(\\d+)_{0,2}:/);\r\n    if (matchUsername !== null) {\r\n      empty = false;\r\n      player.username = matchUsername[1];\r\n    }\r\n    if (matchItem !== null) {\r\n      empty = false;\r\n      player.items.push({name: matchItem[2], tier: parseInt(matchItem[3])});\r\n    }\r\n  }\r\n  if (empty) {\r\n    return null;\r\n  }\r\n  if (player.items.length > 4) {\r\n    return null;\r\n  }\r\n  for (var i = player.items.length; i < 4; i++) {\r\n    player.items.push({name: '', tier: 1});\r\n  }\r\n  return player;\r\n}\r\n\r\nexport function serializePlayer(player) {\r\n  const output = [];\r\n  output.push(utils.format(\"{0}'s Inventory\", player.username));\r\n  for (const item of player.items) {\r\n    output.push(utils.format('1-  {0} {1}:', item.name, item.tier));\r\n  }\r\n  for (const monument in player.monuments) {\r\n    if (monument === 'Angel') {\r\n      output.push(utils.format('BDSM.Angel.{0}',\r\n                               player.monuments.Angel ? '1' : '0'));\r\n      continue;\r\n    }\r\n    output.push(utils.format('|{0}|{1}|',\r\n                             monument,\r\n                             player.monuments[monument]));\r\n  }\r\n  return output.join('\\n');\r\n}\r\n\r\nexport function serializePlayers(players) {\r\n  const output = ['BDSM.partyStart'];\r\n  for (const player of players) {\r\n    output.push(serializePlayer(player));\r\n    output.push('BDSM.playerDivider');\r\n  }\r\n  output.pop();\r\n  return output.join('\\n');\r\n}\r\n\r\nfunction _mutateTemplate(template, scale) {\r\n  if (typeof template != 'object') {\r\n    return template;\r\n  }\r\n\r\n  if ('base' in template && 'scaling' in template) {\r\n    return template.base + template.scaling * scale;\r\n  }\r\n\r\n  // recursive check\r\n  for (const key in template) {\r\n    template[key] = _mutateTemplate(template[key], scale);\r\n  }\r\n  return template;\r\n}\r\n\r\nexport function getScaledTemplate(template, scale) {\r\n  const obj = utils.deepCopyJson(template);\r\n  _mutateTemplate(obj, scale);\r\n  obj.processedInitCharacter = false;\r\n  return obj;\r\n}\r\n","import {Character} from './character.js';\r\nimport * as data from './data.js';\r\nimport * as utils from './utils.js';\r\nimport * as dungeonUtils from './dungeonUtils.js';\r\n\r\nfunction _findPositionWithinTeam(name, team) {\r\n  for (const position in team) {\r\n    const c = team[position];\r\n    if (c.character === name) {\r\n      return position;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\n\r\nexport class Battle {\r\n  constructor(team1, team2) {\r\n    this.summonedChicken = {};\r\n    this.initTeams([team1, team2]);\r\n  }\r\n\r\n  initTeams(teams) {\r\n    this.teams = [[], []];\r\n    this.allCharacters = {};\r\n    this.getTeamOf = {};\r\n    for (const teamIndex in teams) {\r\n      const team = teams[teamIndex];\r\n      for (const i in team) {\r\n        this.addCopyOfCharacterToTeam(team[i], teamIndex);\r\n      }\r\n    }\r\n  }\r\n\r\n  addCharacterToTeam(character, teamIndex) {\r\n    var name = character.character;\r\n    const originalName = name;\r\n    var copyNum = 1;\r\n    while (name in this.allCharacters) {\r\n      copyNum++;\r\n      name = originalName + ' ' + copyNum;\r\n    }\r\n    character.character = name;\r\n    this.getTeamOf[name] = teamIndex;\r\n    this.allCharacters[name] = character;\r\n    character.triggerPhase({\r\n        allyTeamIndex: teamIndex,\r\n        battle: this,\r\n        character: character,\r\n        phase: 'InitCharacter'\r\n    });\r\n    this.teams[teamIndex].push(character);\r\n  }\r\n\r\n  addCopyOfCharacterToTeam(character, teamIndex) {\r\n    const toAdd = new Character(character);\r\n    this.addCharacterToTeam(toAdd, teamIndex);\r\n  }\r\n\r\n  addSummonToTeam(item, teamIndex) {\r\n    const template = data.getTemplates()[item.name];\r\n    const summon = new Character(dungeonUtils.getScaledTemplate(template, item.tier));\r\n    utils.log('Summoning {0} for team {1}', summon.character, teamIndex);\r\n    this.addCharacterToTeam(summon, teamIndex);\r\n  }\r\n\r\n  kill(character) {\r\n    const name = character.character;\r\n    if (character.angelAvailable) {\r\n      utils.log('reviving {0} with angel invite', name);\r\n      character.hp = Math.round(character.hpMax * 0.33);\r\n      character.angelAvailable = false;\r\n      return;\r\n    }\r\n    utils.log('killing: {0}', name);\r\n    const team = this.teams[this.getTeamOf[name]];\r\n    const pos = _findPositionWithinTeam(name, team);\r\n    if (pos < 0) {\r\n      throw Error(utils.format('InternalError: {0} is not in team {1}',\r\n                               name, team));\r\n    }\r\n    delete this.allCharacters[name];\r\n    delete this.getTeamOf[name];\r\n    team.splice(pos, 1);\r\n    if (name in this.summonedChicken) {\r\n      delete this.summonedChicken[name];\r\n    }\r\n  }\r\n\r\n  changeAllEnergy(iterable, amount) {\r\n    for (const key in iterable) {\r\n      iterable[key].changeEnergy({amount: amount});\r\n    }\r\n  }\r\n\r\n  checkAllHp() {\r\n    for (const name in this.allCharacters) {\r\n      const character = this.allCharacters[name];\r\n      if (character.hp <= 0) {\r\n        this.kill(character);\r\n      }\r\n    }\r\n  }\r\n\r\n  teamHasLost(index) {\r\n    return this.teams[index].length === 0;\r\n  }\r\n\r\n  anyTeamHasLost() {\r\n    for (const i in this.teams) {\r\n      if (this.teamHasLost(i)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  tick() {\r\n    if (this.anyTeamHasLost()) {\r\n      return;\r\n    }\r\n\r\n    this.activeCharacter = utils.pickRandom(this.allCharacters, 'speed');\r\n    const activeName = this.activeCharacter.character;\r\n    utils.log('\\n{0}\\'s turn:', activeName);\r\n    this.activeTeamIndex = this.getTeamOf[activeName];\r\n    const defendingTeam = this.teams[1 - this.activeTeamIndex];\r\n\r\n    this.changeAllEnergy(this.allCharacters, 2);\r\n\r\n    if (this.activeCharacter.triggerPhase({phase: 'SkipTurn'})) {\r\n      return;\r\n    }\r\n\r\n    this.activeCharacter.triggerPhase({\r\n        allyTeam: this.teams[this.activeTeamIndex],\r\n        allyTeamIndex: this.activeTeamIndex,\r\n        enemyTeam: defendingTeam,\r\n        battle: this,\r\n        phase: 'TurnStart'\r\n    });\r\n\r\n    this.checkAllHp();\r\n    if (this.anyTeamHasLost()) {\r\n      return;\r\n    }\r\n\r\n    var currentTarget = this.activeCharacter.pickTargetUsingItems(defendingTeam);\r\n\r\n    if (currentTarget.canBeSaved) {\r\n      const blockParams = {\r\n          currentTarget: currentTarget,\r\n          phase: 'Block'\r\n      };\r\n      for (const defendingCharacter of defendingTeam) {\r\n        defendingCharacter.triggerPhase(blockParams);\r\n      }\r\n      currentTarget = blockParams.currentTarget;\r\n    }\r\n\r\n    this.activeCharacter.triggerPhase({\r\n        allyTeam: this.teams[this.activeTeamIndex],\r\n        battle: this,\r\n        currentTarget: currentTarget, enemyTeam: defendingTeam,\r\n        phase: 'PostTarget'\r\n    });\r\n\r\n    utils.log('Main target: {0}', currentTarget.character);\r\n\r\n    const damageBase = utils.pickRandomWithinRange(\r\n        this.activeCharacter.attackLow,\r\n        this.activeCharacter.attackHigh\r\n    );\r\n    utils.log('Attack base damage: {0}', damageBase);\r\n\r\n    const preDamageParams = {\r\n        battle: this,\r\n        currentTarget: currentTarget,\r\n        damageBase: damageBase,\r\n        damageFinal: damageBase,\r\n        enemyTeam: defendingTeam,\r\n        phase: 'PreDamage'\r\n    };\r\n    this.activeCharacter.triggerPhase(preDamageParams);\r\n    if (preDamageParams.damageFinal !== damageBase) {\r\n      utils.log('Attack final damage: {0}', preDamageParams.damageFinal);\r\n    }\r\n\r\n    utils.log('Normal attack:');\r\n    currentTarget.takeDamage({\r\n        amount: preDamageParams.damageFinal,\r\n        battle: this,\r\n        source: this.activeCharacter\r\n    });\r\n\r\n    this.activeCharacter.triggerPhase({\r\n        allyTeam: this.teams[this.activeTeamIndex],\r\n        phase: 'PostDamage'\r\n    });\r\n\r\n    if (this.activeCharacter.poison > 0) {\r\n      utils.log('{0} takes poison damage', this.activeCharacter.character);\r\n      this.activeCharacter.changeHp({amount: -this.activeCharacter.poison});\r\n    }\r\n    this.checkAllHp();\r\n  }\r\n}\r\n","import {Battle} from './battle.js';\r\nimport * as utils from './utils.js';\r\n\r\nexport function runDungeon(team, waves) {\r\n  var currTeam = team;\r\n  for (const character of currTeam) {\r\n    character.processedInitCharacter = false;\r\n  }\r\n  utils.log('\\nTeam 0: {0}', JSON.stringify(team));\r\n  utils.log('\\n\\nStarting dungeon');\r\n  for (const index in waves) {\r\n    utils.log('\\nloading wave {0}', index);\r\n    const wave = waves[index];\r\n    utils.log('Team 1: {0}', JSON.stringify(wave));\r\n    const battle = new Battle(currTeam, wave);\r\n    utils.log(utils.deepCopyJson(battle));\r\n    while (true) {\r\n      battle.tick();\r\n\r\n      utils.log(utils.deepCopyJson(battle));\r\n\r\n      if (battle.teamHasLost(0)) {\r\n        return 1;\r\n      }\r\n\r\n      if (battle.teamHasLost(1)) {\r\n        break;\r\n      }\r\n    }\r\n    currTeam = battle.teams[0];\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function runMany(team, waves, numRuns) {\r\n  var winsForTeam0 = 0;\r\n  for (var i = 0; i < numRuns; i++) {\r\n    if (runDungeon(team, waves) === 0) {\r\n      winsForTeam0++;\r\n    }\r\n  }\r\n  return winsForTeam0;\r\n}\r\n","import * as Comlink from 'comlink';\r\nimport * as Simulator from './simulator';\r\n\r\nconst worker = {\r\n    runDungeon: (team, waves, numRuns) => {\r\n        return Simulator.runMany(team, waves, numRuns);\r\n    }\r\n}\r\n\r\nComlink.expose(worker)"],"sourceRoot":""}